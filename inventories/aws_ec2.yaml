plugin: amazon.aws.aws_ec2

hostnames:
  - private-ip-address
  - public-ip-address
  - dns-name

regions:
  - us-east-1

filters:
  "tag:Deploy": "yes"

# Compose variables to convert unsafe objects to string
compose:
  instance_deploy: tags.Deploy | string
  instance_name: tags.Name | string
  instance_env: tags.Environment | string

# Keyed groups using composed variables
keyed_groups:
  - key: instance_name
    prefix: tag_Name_
  - key: instance_env
    prefix: env_
  - key: instance_deploy
    prefix: tag_Deploy_

strict: False

# Cache configuration (optional)
cache: True
cache_connection: /tmp/aws_ec2_inventory.json
cache_timeout: 300
