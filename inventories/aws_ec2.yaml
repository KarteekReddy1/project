plugin: amazon.aws.aws_ec2

hostnames:
  - private-ip-address
  - public-ip-address
  - dns-name

regions:
  - us-east-1

filters:
  "tag:Deploy": "yes"

keyed_groups:
  - key: tags.Name
    prefix: tag_Name_
  - key: tags.Environment
    prefix: env_
  - key: tags.Deploy
    prefix: tag_Deploy_
    # Force as string to avoid __ansible_unsafe objects
    transform: 'str'

compose:
  instance_deploy: tags.Deploy | string
  instance_name: tags.Name
  instance_env: tags.Environment

strict: False

cache: True
cache_connection: /tmp/aws_ec2_inventory.json
cache_timeout: 300

